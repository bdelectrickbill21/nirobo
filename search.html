<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Nirobo Search - Intelligent URL Discovery</title>
  <!-- Fuse.js for fuzzy search -->
  <script src="https://cdn.jsdelivr.net/npm/fuse.js@7.0.0/dist/fuse.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root {
      --primary-dark: #004d00;
      --primary: #006400;
      --primary-light: #008000;
      --accent: #d40000;
      --accent-hover: #ff0000;
      --background: #0a1f0a;
      --card-bg: #1a1a1a;
      --text: #f5f5f5;
      --text-secondary: #cccccc;
      --border: #333333;
    }
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
    }
    body {
      background: linear-gradient(135deg, var(--background), #003300);
      color: var(--text);
      line-height: 1.6;
      padding: 20px;
      min-height: 100vh;
    }
    .container {
      max-width: 1200px;
      margin: 0 auto;
    }
    /* Header Styles */
    header {
      text-align: center;
      padding: 30px 0;
      margin-bottom: 30px;
      position: relative;
    }
    .logo {
      font-size: 2.8rem;
      color: var(--accent);
      margin-bottom: 10px;
      text-shadow: 0 0 15px rgba(212, 0, 0, 0.5);
    }
    .tagline {
      font-size: 1.2rem;
      color: #ffcccc;
      font-style: italic;
      margin-bottom: 20px;
    }
    /* Search Section */
    .search-section {
      background: rgba(26, 26, 26, 0.8);
      border-radius: 15px;
      padding: 30px;
      margin-bottom: 30px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
      border: 1px solid rgba(212, 0, 0, 0.3);
    }
    .search-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 25px;
      flex-wrap: wrap;
      gap: 15px;
    }
    .search-title {
      font-size: 1.8rem;
      color: var(--accent);
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .ai-badge {
      background: linear-gradient(45deg, #8a2be2, #ff00ff);
      color: white;
      font-size: 0.8rem;
      padding: 3px 10px;
      border-radius: 20px;
      display: inline-flex;
      align-items: center;
      gap: 5px;
    }
    #search-form {
      display: flex;
      gap: 15px;
      margin-bottom: 25px;
    }
    #search-input {
      flex: 1;
      padding: 15px 20px;
      font-size: 1.1rem;
      border: 2px solid var(--accent);
      border-radius: 30px;
      background: rgba(0, 0, 0, 0.3);
      color: var(--text);
      outline: none;
      transition: all 0.3s ease;
    }
    #search-input:focus {
      border-color: var(--accent-hover);
      box-shadow: 0 0 15px rgba(212, 0, 0, 0.5);
    }
    #search-form button {
      padding: 15px 30px;
      background: var(--accent);
      color: white;
      border: none;
      border-radius: 30px;
      font-size: 1.1rem;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    #search-form button:hover {
      background: var(--accent-hover);
      box-shadow: 0 0 20px rgba(255, 0, 0, 0.7);
      transform: translateY(-2px);
    }
    /* Results Section */
    .results-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      flex-wrap: wrap;
      gap: 15px;
    }
    .results-count {
      color: var(--text-secondary);
      font-size: 0.95rem;
    }
    /* Result Cards */
    .result-card {
      background: var(--card-bg);
      border-left: 4px solid var(--accent);
      padding: 25px;
      margin-bottom: 20px;
      border-radius: 10px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      position: relative;
      overflow: hidden;
    }
    .result-card:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 25px rgba(212, 0, 0, 0.3);
      border-left-color: var(--accent-hover);
    }
    .result-header {
      display: flex;
      align-items: flex-start;
      gap: 15px;
      margin-bottom: 15px;
    }
    .favicon {
      width: 32px;
      height: 32px;
      border-radius: 6px;
      flex-shrink: 0;
      background: #333;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 16px;
    }
    .result-content {
      flex: 1;
    }
    .result-title {
      font-size: 1.3rem;
      margin-bottom: 8px;
      color: #ff9999;
    }
    .result-title a {
      color: #ff9999;
      text-decoration: none;
    }
    .result-title a:hover {
      text-decoration: underline;
      color: var(--accent-hover);
    }
    .result-url {
      color: #888;
      font-size: 0.9rem;
      margin-bottom: 12px;
      display: block;
      word-break: break-all;
    }
    .result-description {
      margin-bottom: 15px;
      color: var(--text-secondary);
      line-height: 1.7;
    }
    .result-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 15px;
    }
    .result-tag {
      background: rgba(212, 0, 0, 0.2);
      color: #ff9999;
      padding: 4px 12px;
      border-radius: 20px;
      font-size: 0.85rem;
    }
    /* Loading & No Results */
    .loading {
      text-align: center;
      padding: 40px;
    }
    .spinner {
      border: 4px solid rgba(255, 255, 255, 0.1);
      border-radius: 50%;
      border-top: 4px solid var(--accent);
      width: 40px;
      height: 40px;
      animation: spin 1s linear infinite;
      margin: 0 auto 20px;
    }
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    .no-results {
      text-align: center;
      padding: 60px 20px;
      color: var(--text-secondary);
    }
    .no-results i {
      font-size: 3rem;
      margin-bottom: 20px;
      color: #555;
    }
    /* Footer */
    footer {
      background: rgba(26, 26, 26, 0.9);
      color: #ccc;
      padding: 30px;
      text-align: center;
      font-size: 0.9rem;
      border-top: 1px solid var(--border);
      margin-top: 50px;
      border-radius: 10px;
    }
    footer a {
      color: #ff9999;
      text-decoration: none;
    }
    footer a:hover {
      text-decoration: underline;
    }
    /* Responsive Design */
    @media (max-width: 768px) {
      body {
        padding: 15px;
      }
      .search-section {
        padding: 20px;
      }
      #search-form {
        flex-direction: column;
      }
      .search-header {
        flex-direction: column;
        text-align: center;
      }
      .result-header {
        flex-direction: column;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="logo">
        <i class="fas fa-brain"></i> NIROBO
      </div>
      <div class="tagline">"Intelligent URL Discovery Powered by AI"</div>
      <a href="/" style="color: #ff9999; text-decoration: none;">‚Üê Back to Nirobo</a>
    </header>
    
    <!-- Search Section -->
    <section class="search-section">
      <div class="search-header">
        <h2 class="search-title">
          <i class="fas fa-search"></i> Intelligent Search
          <span class="ai-badge">
            <i class="fas fa-robot"></i> AI-Powered
          </span>
        </h2>
      </div>
      <form id="search-form">
        <input type="text" id="search-input" placeholder="Search the web intelligently..." autocomplete="off">
        <button type="submit">
          <i class="fas fa-search"></i> Search
        </button>
      </form>
    </section>
    
    <!-- Results Section -->
    <section class="results-section">
      <div class="results-header">
        <div class="results-count" id="resultsCount">Ready to search...</div>
      </div>
      <div id="results">
        <div class="no-results">
          <i class="fas fa-robot"></i>
          <h3>Welcome to Nirobo Search</h3>
          <p>Our AI-powered search engine combines curated databases with community submissions.</p>
          <p>Enter a search term above to begin exploring the web intelligently.</p>
        </div>
      </div>
    </section>
    
    <footer>
      <p>Made in Bangladesh üáßüá© | Curated by Nirobo</p>
      <p>Honoring the Language Movement and the Silent Legacy of Justice</p>
      <p>Crafted by KH. AL SHAIF ‚Äî for truth, clarity, and cultural dignity</p>
      <p><a href="/">‚Üê Back to Nirobo</a></p>
    </footer>
  </div>

  <script>
    // --- DYNAMIC SEARCH ENGINE ---
    class NiroboSearch {
      constructor() {
        this.fuseInstance = null;
        this.allResults = [];
        this.query = '';
        this.resultsPerPage = 10;
        this.currentPage = 1;
        
        // Initialize with built-in demo data + localStorage submissions
        this.initializeData();
        this.bindEvents();
      }
      
      // Initialize search data
      initializeData() {
        // Built-in demo data (works immediately without external files)
        const demoData = [
          {
            title: "Nirobo AI Search",
            url: "https://nirobo.ai",
            description: "Intelligent URL discovery powered by artificial intelligence",
            tags: ["ai", "search", "discovery", "intelligence"]
          },
          {
            title: "Google Search",
            url: "https://google.com",
            description: "The world's most popular search engine",
            tags: ["search", "google", "web", "engine"]
          },
          {
            title: "GitHub",
            url: "https://github.com",
            description: "Platform for software development and version control",
            tags: ["development", "code", "git", "programming"]
          },
          {
            title: "Wikipedia",
            url: "https://wikipedia.org",
            description: "Free online encyclopedia with millions of articles",
            tags: ["encyclopedia", "knowledge", "reference", "education"]
          },
          {
            title: "YouTube",
            url: "https://youtube.com",
            description: "Video sharing platform with billions of videos",
            tags: ["video", "streaming", "entertainment", "media"]
          },
          {
            title: "Stack Overflow",
            url: "https://stackoverflow.com",
            description: "Community for programmers to ask and answer questions",
            tags: ["programming", "questions", "answers", "developer"]
          }
        ];
        
        // Load approved submissions from localStorage
        const approvedSubmissions = this.loadApprovedSubmissions();
        
        // Combine demo data with user submissions
        this.allResults = [...demoData, ...approvedSubmissions];
        
        // Initialize Fuse.js for fuzzy search
        this.initializeFuse();
      }
      
      // Load approved submissions from localStorage
      loadApprovedSubmissions() {
        try {
          const submissions = JSON.parse(localStorage.getItem('niroboAllSubmissions') || '[]');
          return submissions
            .filter(sub => sub.status === 'approved')
            .map(sub => ({
              title: sub.title || 'Untitled',
              url: sub.url || '#',
              description: sub.description || 'No description available',
              tags: Array.isArray(sub.tags) ? sub.tags : ['submission']
            }));
        } catch (error) {
          console.warn('Failed to load approved submissions:', error);
          return [];
        }
      }
      
      // Initialize Fuse.js search engine
      initializeFuse() {
        const options = {
          keys: [
            { name: 'title', weight: 1.0 },
            { name: 'description', weight: 0.8 },
            { name: 'tags', weight: 0.7 },
            { name: 'url', weight: 0.5 }
          ],
          includeScore: true,
          threshold: 0.4,
          minMatchCharLength: 2,
          shouldSort: true
        };
        
        this.fuseInstance = new Fuse(this.allResults, options);
      }
      
      // Perform search using Fuse.js
      performSearch(searchTerm) {
        if (!this.fuseInstance || !searchTerm.trim()) {
          return [];
        }
        
        const results = this.fuseInstance.search(searchTerm.trim());
        return results
          .sort((a, b) => (a.score || 1) - (b.score || 1))
          .map(result => result.item);
      }
      
      // Get favicon URL
      getFaviconUrl(url) {
        try {
          const hostname = new URL(url).hostname;
          return `https://www.google.com/s2/favicons?domain=${hostname}&sz=32`;
        } catch (e) {
          return 'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><rect width="32" height="32" fill="%23444" rx="4"/><text x="50%" y="50%" fill="white" font-size="16" font-family="Arial" text-anchor="middle" dominant-baseline="middle">?</text></svg>';
        }
      }

      <!-- Filter Tabs (already in your search.html) -->
<div class="filter-tabs">
  <button class="filter-tab active" data-filter="all">
    <i class="fas fa-globe"></i> All
  </button>
  <button class="filter-tab" data-filter="websites">
    <i class="fas fa-window-maximize"></i> Websites
  </button>
  <button class="filter-tab" data-filter="images">
    <i class="fas fa-image"></i> Images
  </button>
  <button class="filter-tab" data-filter="videos">
    <i class="fas fa-video"></i> Videos
  </button>
  <button class="filter-tab" data-filter="documents">
    <i class="fas fa-file-alt"></i> Documents
  </button>
</div>
      
      // Render search results
      renderResults(results) {
        const resultsContainer = document.getElementById('results');
        
        if (results.length === 0) {
          resultsContainer.innerHTML = `
            <div class="no-results">
              <i class="fas fa-search-minus"></i>
              <h3>No Results Found</h3>
              <p>We couldn't find any matches for "${this.query}".</p>
              <p>Try different keywords or check your spelling.</p>
            </div>
          `;
          return;
        }
        
        // Paginate results
        const startIndex = (this.currentPage - 1) * this.resultsPerPage;
        const endIndex = Math.min(startIndex + this.resultsPerPage, results.length);
        const pageResults = results.slice(startIndex, endIndex);
        
        let html = '';
        pageResults.forEach(result => {
          const faviconUrl = this.getFaviconUrl(result.url);
          const cleanUrl = result.url.replace(/^https?:\/\//, '').replace(/\/$/, '');
          const truncatedUrl = cleanUrl.length > 50 ? cleanUrl.substring(0, 50) + '...' : cleanUrl;
          
          html += `
            <div class="result-card">
              <div class="result-header">
                <div class="favicon">
                  <img src="${faviconUrl}" alt="Favicon" onerror="this.parentElement.innerHTML='<i class=\\'fas fa-link\\'></i>'">
                </div>
                <div class="result-content">
                  <h3 class="result-title">
                    <a href="${result.url}" target="_blank" rel="noopener">${result.title}</a>
                  </h3>
                  <a href="${result.url}" class="result-url" target="_blank" rel="noopener">${truncatedUrl}</a>
                  <p class="result-description">${result.description}</p>
                  <div class="result-tags">
                    ${(Array.isArray(result.tags) ? result.tags : [])
                      .slice(0, 5)
                      .map(tag => `<span class="result-tag">${tag}</span>`)
                      .join('')}
                  </div>
                </div>
              </div>
            </div>
          `;
        });
        
        resultsContainer.innerHTML = html;
        this.updateResultsCount(results.length);
      }
      
      // Update results count display
      updateResultsCount(total) {
        document.getElementById('resultsCount').textContent = 
          `About ${total} results found`;
      }
      
      // Handle search form submission
      handleSearch(e) {
        e.preventDefault();
        this.query = document.getElementById('search-input').value.trim();
        
        if (!this.query) {
          alert("Please enter a search term.");
          return;
        }
        
        // Show loading state
        document.getElementById('results').innerHTML = `
          <div class="loading">
            <div class="spinner"></div>
            <p>Searching with Nirobo AI Engine...</p>
          </div>
        `;
        
        // Perform search
        const results = this.performSearch(this.query);
        this.renderResults(results);
      }
      
      // Bind event listeners
      bindEvents() {
        document.getElementById('search-form').addEventListener('submit', (e) => {
          this.handleSearch(e);
        });
      }
    }
    
    // Initialize search engine when DOM is loaded
    document.addEventListener('DOMContentLoaded', () => {
      new NiroboSearch();
    });
  </script>
</body>
</html>
